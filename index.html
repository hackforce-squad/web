<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Example</title>
<!--         <script>
window.fcSettings = {
  onInit: function() {
    window.fcWidget.on("widget:destroyed", function() {
      console.log('After widget destroyed');
      // Do some clean-up here 
    });
  }
}
</script> -->
<!--     <script src='//in.fw-cdn.com/30003745/2511.js'chat='true'></script>
 -->

<!-- 	Commenting out crm tracking code as its added in google tag manager
	
	<!-- Google tag (gtag.js) Google Analytics --> -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-HRBMTTSQSN"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-HRBMTTSQSN');
</script>

	<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5LDSLK65');</script>
<!-- End Google Tag Manager -->
</head>
<body>

	<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5LDSLK65"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
	
    <h1>Registration Form</h1>
    <form id="form_name">
        <label for="first_name">First Name:</label><br>
        <input type="text" id="first_name" required><br>
        
        <label for="last_name">Last Name:</label><br>
        <input type="text" id="last_name" required><br>
        
        <label for="email">Email:</label><br>
        <input type="email" id="email" name="email" required><br>
        
        <label for="mobile">Mobile:</label><br>
        <input type="tel" id="mobile" name="mobile" required><br>

                <label for="dob">Date of Birth:</label><br>
        <input type="date" id="dob" name="DOB" required><br>
        
        <label for="company_name">Company Name:</label><br>
        <input type="text" id="company_name" name="company_name" required><br><br>
        
<button><span class="l7_2fn wixui-button__label">Send</span></button>

        <div>
		<br><br><br><br>
Form 2 - Includes Identify Call
            
        </div>

        

    </form>


        <form id="form_2">
        <label for="first_name">First Name:</label><br>
        <input type="text" id="first_name_2" name="First name" required><br>
        
        <label for="last_name">Last Name:</label><br>
        <input type="text" id="last_name_2" name="Last name" required><br>
        
        <label for="email">Email:</label><br>
        <input type="email" id="email_2" name="Email" required><br>
        
        <label for="mobile">Mobile:</label><br>
        <input type="tel" id="mobile_2" name="Mobile" required><br>
        
        <label for="company_name">Company Name:</label><br>
        <input type="text" id="company_name_2" name="Company name" required><br><br>
        
<input type="submit" onclick="identify_call()">

    </form>

<script>
    function identify_call() {
        var new_contact = {
            "First name": document.getElementById("first_name_2").value,
            "Last name": document.getElementById("last_name_2").value,
            "Email": document.getElementById("email_2").value,
            "Mobile": document.getElementById("mobile_2").value,
            "User Agent":"testing123909",
            "company": {
                "Name": document.getElementById("company_name_2").value
            }
        };
        var identifier = document.getElementById("email_2").value; // Using email as identifier
        fwcrm.identify(identifier, new_contact);
        // You might need to handle the submission of the form here, e.g., redirecting to another page or displaying a success message
    }
</script>

	<img style="width:100, height:100" src="https://www.apple.com/v/home/takeover/o/images/overview/iphone-16-pro/iphone_16_pro_startframe__fjdwae8n0tua_large_2x.jpg"></img>

<!-- 	<script src='https://tadashicorp-team1.myfreshworks.com/crm/sales/web_forms/b61b9219f175012ced445e93c68a49050cae0f718740c1abc17665d78caf6fdd/form.js' crossorigin='anonymous' id='fs_b61b9219f175012ced445e93c68a49050cae0f718740c1abc17665d78caf6fdd'></script>
	 -->
	<script src='https://tadashicorp-team1.myfreshworks.com/crm/sales/web_forms/988b195877fee067ac4f2369ed10ef0771071bbc5b80641685022db6f8b0c94a/form.js' crossorigin='anonymous' id='fs_988b195877fee067ac4f2369ed10ef0771071bbc5b80641685022db6f8b0c94a'></script>
<!-- 	<script>  
document.addEventListener("DOMContentLoaded", function () {

	// Cookie code
    const formSelector = "[id^='fs-webform-container_'] form"; // General selector for the form
    const maxRetries = 10; // Retry up to 10 times
    const retryInterval = 500; // Retry every 500ms

    let attempts = 0;

    function findForm() {
        const form = document.querySelector(formSelector);

        if (form) {
            console.log("Form found!");
            attachFormListener(form);
        } else if (attempts < maxRetries) {
            attempts++;
            setTimeout(findForm, retryInterval); // Retry finding the form
        } else {
            console.error("Form not found after multiple attempts. Please check the selector.");
        }
    }

    findForm();

    // Debounce function to delay execution
    function debounce(func, delay) {
        let timer;
        return function (...args) {
            clearTimeout(timer);
            timer = setTimeout(() => func.apply(this, args), delay);
        };
    }

    // Attach event listener to capture data
    function attachFormListener(form) {
        form.addEventListener("input", debounce(function (event) {
            const target = event.target;
            if (target.name) {
                const value = target.value;
                setCookie(target.name, value, 1); // Store in cookies for 1 day
            }
        }, 500)); // Debounce delay set to 500ms

        console.log("Form listener with debounce attached.");
    }

    // Set a cookie
    function setCookie(name, value, days) {
        const date = new Date();
        date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
        const expires = "expires=" + date.toUTCString();
        document.cookie = name + "=" + encodeURIComponent(value) + ";" + expires + ";path=/";
        console.log(`Cookie set: ${name}=${value}`);
    }
});

	</script> -->

	<script>
		document.addEventListener('DOMContentLoaded', function () {
  console.log("Script initialized, waiting for the mobile field...");

  // Function to validate the mobile number
  function validateMobileNumber(mobileField) {
    const ukMobileRegex = /^(\+44|0)7\d{9}$/;

    // Check the validity when the user inputs or when the form is submitted
    mobileField.addEventListener('input', function () {
      const mobileNumber = mobileField.value.trim();

      if (!ukMobileRegex.test(mobileNumber)) {
        mobileField.setCustomValidity('Please enter a valid UK mobile number like +447989812871');
        console.log("Invalid mobile number entered:", mobileNumber);
      } else {
        mobileField.setCustomValidity(''); // Clear the error
        console.log("Valid mobile number:", mobileNumber);
      }
    });
  }

  // Function to find the mobile field and attach validation
  function setupMobileFieldValidation() {
    const mobileField = document.querySelector('input[name="contact[mobile_number]"]');
    if (mobileField) {
      console.log("Mobile field found:", mobileField);
      validateMobileNumber(mobileField);

      const form = mobileField.closest('form');
      if (form) {
        // Prevent form submission if the mobile number is invalid
        form.addEventListener('submit', function (event) {
          if (!mobileField.checkValidity()) {
            console.log("Form submission blocked due to invalid mobile number.");
            event.preventDefault(); // Block the form submission
            mobileField.reportValidity(); // Show the validation message
          }
        });
      }
      return true;
    }
    return false;
  }

  // Use MutationObserver to detect changes in the DOM
  const observer = new MutationObserver(() => {
    if (setupMobileFieldValidation()) {
      observer.disconnect(); // Stop observing once the field is found
    }
  });

  // Start observing the DOM
  observer.observe(document.body, { childList: true, subtree: true });

  // Check if the field is already present when the script runs
  setupMobileFieldValidation();
});


</script>

	
</body>
</html>
